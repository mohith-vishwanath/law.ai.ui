<div class="results-main">
    <div class="top-section">
        <div>
            <div class="search-bar">
                <input type="text" class="search-input" placeholder="{{searchPlaceholderText}}"
                    [(ngModel)]="searchQuery" (keydown.enter)="Search()">
                <button class="search-button" (click)="Search()" [disabled]="DisableSearchButton()">Go</button>
            </div>
            <div class="search-metadata">
                <p>{{searchMetadata.type}}</p>
                <button class="border-less-button" *ngIf="isAnyCaseChecked" (click)="MoveCasesToChat()">
                    Move {{ numOfSelectedCases }} {{ numOfSelectedCases === 1 ? 'case' : 'cases' }} to Chat
                </button>
            </div>
        </div>
        <div class="filters">

        </div>
    </div>
    <hr>
    <div class="search-results">
        <div class="results-section">
            <div *ngIf="!isSearchLoading">
                <div class="result-case" *ngFor="let result of GetListOfCases">
                    <div class="result-content">
                        <div class="case-title">
                            <input type="checkbox" [checked]="result[1].isChecked"
                                (change)="CheckboxClicked($event, result[0])">
                            <p><button class="clear-button"
                                    (click)="ShowSummary(result[0])">{{result[1].title}}</button></p>
                        </div>
                        <div class="summary" [innerHTML]="result[1].summary.Summary"></div>
                    </div>
                    <div class="case-footnote">
                        <p class="case-metadata" *ngIf="result[1].numcites">Cited by {{result[1].numcites}}</p>
                        <p class="case-metadata" *ngIf="result[1].date">{{result[1].date}}</p>
                        <p class="case-metadata" *ngIf="result[1].source">{{result[1].source}}</p>
                        <p class="case-metadata" *ngIf="result[1].score">Relevance {{result[1].score}}%</p>
                    </div>
                    <hr>
                </div>
            </div>
            <div class="loading-spinner" *ngIf="isSearchLoading">
                <div class="spinner-container">
                    <mat-spinner [diameter]="50"></mat-spinner>
                    <p>{{searchLoadingMessage}}</p>
                </div>
            </div>
        </div>
        <div class="preview-section">
            <div class="case-preview" *ngIf="showCasePreview">
                <div class="case-preview-container">
                    <div class="case-preview-title">
                        <p>{{results[selectedCaseId]?.title}}</p>
                        <button (click)="showCasePreview = !showCasePreview">Close</button>
                    </div>
                    <div class="case-text">
                        <div [innerHTML]="results[selectedCaseId]?.html"></div>
                    </div>
                </div>
            </div>
            <div class="case-summary" *ngIf="showCaseSummary">
                <div class="case-summary-container">
                    <div class="summary-top-bar">
                        <button class="border-less-button" (click)="OpenCase()">Open Case</button>
                        <button class="border-less-button" (click)="CloseSummary()">Close</button>
                    </div>
                    <div class="section" id="summary" *ngIf="results[selectedCaseId]?.summary?.Summary">
                        <p class="section-title">Summary</p>
                        <hr>
                        <div [innerHTML]="results[selectedCaseId]?.summary?.Summary"></div>
                    </div>
                    <div class="section" id="facts" *ngIf="results[selectedCaseId]?.summary?.Facts">
                        <p class="section-title">Facts</p>
                        <hr>
                        <div [innerHTML]="results[selectedCaseId]?.summary?.Facts"></div>
                    </div>
                    <div class="section" id="arguments" *ngIf="results[selectedCaseId]?.summary?.Arguments">
                        <p class="section-title">Arguments</p>
                        <hr>
                        <div [innerHTML]="results[selectedCaseId]?.summary?.Arguments"></div>
                    </div>
                    <div class="section" id="reasoning" *ngIf="results[selectedCaseId]?.summary?.Reasoning">
                        <p class="section-title">Reasoning</p>
                        <hr>
                        <div [innerHTML]="results[selectedCaseId]?.summary?.Reasoning"></div>
                    </div>
                    <div class="section" id="conclusion" *ngIf="results[selectedCaseId]?.summary?.Conclusion">
                        <p class="section-title">Conclusion</p>
                        <hr>
                        <div [innerHTML]="results[selectedCaseId]?.summary?.Conclusion"></div>
                    </div>
                    <div class="section" id="laws" *ngIf="results[selectedCaseId]?.summary?.Laws">
                        <p class="section-title">Laws</p>
                        <hr>
                        <div [innerHTML]="results[selectedCaseId]?.summary?.Laws"></div>
                    </div>
                </div>
            </div>
            <div class="case-summary" *ngIf="!showCasePreview && !showCaseSummary && !isSearchLoading">
                <div class="case-summary-container">
                    <div class="ai-overview-title">
                        <b> <img src="../../../../assets/text.quote.png" alt="Logo" class="inline-image"> AI
                            Overview</b>
                        <hr>
                    </div>
                    <div [innerHTML]="searchMetadata.summary"></div>
                </div>
            </div>
        </div>
    </div>
</div>